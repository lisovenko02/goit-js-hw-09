{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,WAGA,IAMIC,EACAC,EAPEC,EAAOC,SAASC,cAAc,SAC9BC,EAAaF,SAASC,cAAc,kBACpCE,EAAYJ,EAAKK,SAAS,GAAGC,kBAC7BC,EAASN,SAASC,cAAc,mBAChCM,EAAYR,EAAKS,iBA4CvB,SAASC,EAAcC,EAAUC,GAC/B,IAAMC,EAAgBC,KAAKC,SAAW,GACtC,OAAO,IAAIC,SAAQ,SAACC,EAAKC,GACnBL,EAEFI,EAAI,CAAEE,SAAAR,EAAUS,MAAAR,IAGhBM,EAAI,CAAEC,SAAAR,EAAUS,MAAAR,G,IAGjBS,MAAK,SAAAC,G,IAAGH,EAAQG,EAARH,SAAUC,EAAKE,EAALF,MACjBxB,EAAA2B,OAAOC,QAAQ,uBAAwCC,OAAfN,EAAS,QAAYM,OAANL,EAAM,M,IAE9DM,OAAM,SAAAJ,G,IAAGH,EAAQG,EAARH,SAAUC,EAAKE,EAALF,MAClBxB,EAAA2B,OAAOI,QAAQ,sBAAqCF,OAAfN,EAAS,QAAYM,OAANL,EAAM,M,IAtDhEZ,EAAUoB,iBAAiB,SAC3B,SAAkBC,GAChBA,EAAEC,iBAEFhC,EAAU,EACVC,EAAc,EAEd,IAAIqB,EAAQW,OAAO5B,EAAW6B,OACxBC,EAAOF,OAAO3B,EAAU4B,OACxBE,EAAgBH,OAAOxB,EAAOyB,OAEpC,IAAKE,EACH,OAEA1B,EAAU2B,UAAW,EAGvBC,YAAW,WAKT,GAHArC,GAAeqB,EAEfV,EAHAZ,GAAW,EAGYsB,GACnBtB,IAAYoC,EAIhB,IAAMG,EAAKC,aAAY,WAErBvC,GAAekC,GADfnC,GAAW,KAGKoC,IACd1B,EAAU2B,UAAW,EACrBI,cAAcF,IAEhB3B,EAAcZ,EAASC,E,GACtBkC,E,GACFb,E","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport 'notiflix/dist/notiflix-aio-3.2.6.min.js';\n\nconst form = document.querySelector('.form');\nconst firstDelay = document.querySelector('[name=\"delay\"]');\nconst delayStep = form.children[1].firstElementChild;\nconst amount = document.querySelector('[name=\"amount\"]');\nconst createBtn = form.lastElementChild;\n\nlet counter;\nlet delayedTime;\n\ncreateBtn.addEventListener('click', onCreate);\nfunction onCreate(e) {\n  e.preventDefault();\n\n  counter = 0;\n  delayedTime = 0;\n\n  let delay = Number(firstDelay.value);\n  const step = Number(delayStep.value);\n  const promiseAmount = Number(amount.value);\n\n  if (!promiseAmount) {\n    return;\n  } else {\n    createBtn.disabled = true;\n  }\n\n  setTimeout(() => {\n    counter += 1;\n    delayedTime += delay;\n\n    createPromise(counter, delay);\n    if (counter === promiseAmount) {\n      return;\n    }\n\n    const id = setInterval(() => {\n      counter += 1;\n      delayedTime += step;\n\n      if (counter === promiseAmount) {\n        createBtn.disabled = false;\n        clearInterval(id);\n      }\n      createPromise(counter, delayedTime);\n    }, step);\n  }, delay);\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  return new Promise((res, rej) => {\n    if (shouldResolve) {\n      // Fulfill\n      res({ position, delay });\n    } else {\n      // Reject\n      rej({ position, delay });\n    }\n  })\n    .then(({ position, delay }) => {\n      Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n    })\n    .catch(({ position, delay }) => {\n      Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n    });\n}"],"names":["$h6c0i","parcelRequire","$ce04d3a99e08e73b$var$counter","$ce04d3a99e08e73b$var$delayedTime","$ce04d3a99e08e73b$var$form","document","querySelector","$ce04d3a99e08e73b$var$firstDelay","$ce04d3a99e08e73b$var$delayStep","children","firstElementChild","$ce04d3a99e08e73b$var$amount","$ce04d3a99e08e73b$var$createBtn","lastElementChild","$ce04d3a99e08e73b$var$createPromise","position1","delay1","shouldResolve","Math","random","Promise","res","rej","position","delay","then","param","Notify","success","concat","catch","failure","addEventListener","e","preventDefault","Number","value","step","promiseAmount","disabled","setTimeout","id","setInterval","clearInterval"],"version":3,"file":"03-promises.719f71c2.js.map"}