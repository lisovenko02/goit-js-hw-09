{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,WAGA,MAAMC,EAAOC,SAASC,cAAc,SAC9BC,EAAaF,SAASC,cAAc,kBACpCE,EAAYJ,EAAKK,SAAS,GAAGC,kBAC7BC,EAASN,SAASC,cAAc,mBAChCM,EAAYR,EAAKS,iBAEvB,IAAIC,EACAC,EAyCJ,SAASC,EAAcC,EAAUC,GAC/B,MAAMC,EAAgBC,KAAKC,SAAW,GACtC,OAAO,IAAIC,SAAQ,CAACC,EAAKC,KACnBL,EAEFI,EAAI,CAAEE,SAAAR,EAAUS,MAAAR,IAGhBM,EAAI,CAAEC,SAAAR,EAAUS,MAAAR,GAAQ,IAGzBS,MAAK,EAACF,SAAEA,EAAQC,MAAEA,MACjBxB,EAAA0B,OAAOC,QAAQ,uBAAqBJ,QAAiBC,MAAU,IAEhEI,OAAM,EAACL,SAAEA,EAAQC,MAAEA,MAClBxB,EAAA0B,OAAOG,QAAQ,sBAAoBN,QAAeC,MAAU,G,CAtDlEd,EAAUoB,iBAAiB,SAC3B,SAAkBC,GAChBA,EAAEC,iBAEFpB,EAAU,EACVC,EAAc,EAEd,IAAIW,EAAQS,OAAO5B,EAAW6B,OAC9B,MAAMC,EAAOF,OAAO3B,EAAU4B,OACxBE,EAAgBH,OAAOxB,EAAOyB,OAEpC,IAAKE,EACH,OAEA1B,EAAU2B,UAAW,EAGvBC,YAAW,KAKT,GAJA1B,GAAW,EACXC,GAAeW,EAEfV,EAAcF,EAASY,GACnBZ,IAAYwB,EACd,OAGF,MAAMG,EAAKC,aAAY,KACrB5B,GAAW,EACXC,GAAesB,EAEXvB,IAAYwB,IACd1B,EAAU2B,UAAW,EACrBI,cAAcF,IAEhBzB,EAAcF,EAASC,EAAY,GAClCsB,EAAK,GACPX,E","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport 'notiflix/dist/notiflix-aio-3.2.6.min.js';\n\nconst form = document.querySelector('.form');\nconst firstDelay = document.querySelector('[name=\"delay\"]');\nconst delayStep = form.children[1].firstElementChild;\nconst amount = document.querySelector('[name=\"amount\"]');\nconst createBtn = form.lastElementChild;\n\nlet counter;\nlet delayedTime;\n\ncreateBtn.addEventListener('click', onCreate);\nfunction onCreate(e) {\n  e.preventDefault();\n\n  counter = 0;\n  delayedTime = 0;\n\n  let delay = Number(firstDelay.value);\n  const step = Number(delayStep.value);\n  const promiseAmount = Number(amount.value);\n\n  if (!promiseAmount) {\n    return;\n  } else {\n    createBtn.disabled = true;\n  }\n\n  setTimeout(() => {\n    counter += 1;\n    delayedTime += delay;\n\n    createPromise(counter, delay);\n    if (counter === promiseAmount) {\n      return;\n    }\n\n    const id = setInterval(() => {\n      counter += 1;\n      delayedTime += step;\n\n      if (counter === promiseAmount) {\n        createBtn.disabled = false;\n        clearInterval(id);\n      }\n      createPromise(counter, delayedTime);\n    }, step);\n  }, delay);\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  return new Promise((res, rej) => {\n    if (shouldResolve) {\n      // Fulfill\n      res({ position, delay });\n    } else {\n      // Reject\n      rej({ position, delay });\n    }\n  })\n    .then(({ position, delay }) => {\n      Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n    })\n    .catch(({ position, delay }) => {\n      Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n    });\n}"],"names":["$iQIUW","parcelRequire","$47d4ff9957288465$var$form","document","querySelector","$47d4ff9957288465$var$firstDelay","$47d4ff9957288465$var$delayStep","children","firstElementChild","$47d4ff9957288465$var$amount","$47d4ff9957288465$var$createBtn","lastElementChild","$47d4ff9957288465$var$counter","$47d4ff9957288465$var$delayedTime","$47d4ff9957288465$var$createPromise","position1","delay1","shouldResolve","Math","random","Promise","res","rej","position","delay","then","Notify","success","catch","failure","addEventListener","e","preventDefault","Number","value","step","promiseAmount","disabled","setTimeout","id","setInterval","clearInterval"],"version":3,"file":"03-promises.eca31748.js.map"}